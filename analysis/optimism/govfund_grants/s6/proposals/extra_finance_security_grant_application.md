# Extra Finance Security Grant Application

**Project URL:** [Link](https://app.charmverse.io/op-grants/extra-finance-security-grant-application-7028250039355781)

**Audit Service Provider:**

Sherlock

**Project name:**

Extra Finance 

**What is this project about?**

Extra Finance is a leveraged yield farming protocol built within the Superchain ecosystem. 
Extra Finance enables users to farm diverse farming pools with customized farming strategies, and it also serves as a lending protocol, allowing users to deposit funds and earn interest. 

**Project Contact Email:**

ceylon@extrafi.io 

**Telegram**

https://t.me/phoker_ceylon 

**X handle:**

https://twitter.com/extrafi_io 

**Website:**

https://app.extrafi.io 

**Github:**

https://github.com/ExtraFi/extra-contracts 

**Demo:**

https://docs.extrafi.io/extra_finance/ 

**Discord/Discourse/Community:**

https://discord.gg/extra-finance 

**Other:**

https://defillama.com/protocol/extra-finance#inf 

**OP request locked:**

4800

**OP request for User incentives:**

28850

**L2 Recipient Address:**

 0x5A973117Dd273676bf4D14313b80562DC8973ba9 

**Distribution plan:**

The incentives will be distributed to security researchers participating in the audit contest based on their performance (number and severity of vulnerabilities found) as well as in the form of fix pay for Lead Senior Watsons. For more information, please refer to the "Watsons" page of our official documentation here: https://docs.sherlock.xyz/audits/watsons

**What is this project going to build?**

1. Why are they going to succeed? DeFi users require leveraged liquidity providing platforms to execute a wide range of yield strategies. These strategies include market-neutral farming strategy, farming while maintaining exposure to a single asset, etc. ExtraFi is the first well-adopted leveraged yield farming protocol on Optimism, significantly growing the liquidity on Optimism and Superchain, with a TVL exceeding $130M. We've successfully integrated Velodrome AMM, onboarding mainstream LP farming pairs from ecosystem partners such as VELO-USDC of Velodrome, msETH-WETH & msOP-OP & USDC-msUSD of Metronome, USDC-DOLA of Inverse, and USDC-OP, etc. ExtraFi plays a crucial role in boosting liquidity, unleashing the composability of the OP DeFi ecosystem, and enhancing overall capital efficiency. 2. Why is what they are going to build novel or valuable to Optimism? ExtraFi builds unique features that greatly facilitate liquidity providers on Optimism. These features are also cutting-edge in the space: Provide useful tools such as the PnL simulator, which converts financial data to comprehensive graphs, to help users open positions and maximize their return. Provide different build-in farming templates, to help users conveniently implement farming(or open/update position) with corresponding strategies, such as long, short, and neutral. Combined with the PnL simulator, users can directly and visually get the traits and estimate the performances of different farming strategies. Provide features for users to access full control of their positions, including stop-price-range, repay and rebalance. For example, the stop-price-range feature enables users to set prices(minPrice and maxPrice) to automatically close the position once any one of the prices triggers. Provide users with unparalleled access to detailed data, empowering them to make informed decisions when opening positions, such as the daily return, APY breakdown before and after auto-compound, historical prices, average earnings in 30 days, etc. 3. How is this project likely to bring and keep new builders to the Optimism ecosystem Our integration with Velodrome AMM marks enhancement to ExtraFi's range of strategies. After integration, we deliver unique, high-yield strategies that are not just novel within the ecosystem, but also capital-efficient. These strategies are well-positioned to draw in new capital to Optimism, improving liquidity and the usefulness of existing protocols. By providing these customized strategies, ExtraFi is aiding the diversification and growth of the Optimism DeFi landscape, promoting further innovation and user interaction. 4. What are some comparable projects?  What differentiates this one? Alpaca Finance - not on Optimism Tarot - on Optimism (partially similar - not same) Specifically, compared with Tarot, the following are ExtraFi’s unique features: Provide crypto assets directly to perform leveraged farming On Extra Finance, users can directly provide assets as collateral in their wallets instead of getting LP tokens first. The platform will zap the deposit and debt into LP tokens using the best swap route on Velodrome. (No more actions to switch between protocols) PnL Simulator Extra Finance provides a visualized chart with various factors such as price movement, IL, farming duration, etc, enabling users to make informed decisions when opening a position. With the yield farming simulator, users can see the estimated amount they will earn, how changes in price impact their equity value, and the liquidation price based on different position settings. Users can also simulate changes in value for varying leverage settings and borrowed assets. Support Farming with Long/Short or Neutral Viewpoint On Extra Finance, users have control over the exposure of a position. By borrowing different ratios of assets, he/she can hedge exposure or shape the portfolio according to their expectations, and minimize unexpected losses. And Extra Finance also supports one-click farming templates - to simplify the process of setting up farming strategies. These templates allow anyone to start farming like a DeFi expert in no time. Rigorous Farming Calculation APR is capped by emissions, and affected by lending interest, also, there is potential slippage and swap cost in LP zapping. All these are well calculated and listed in 'Summary' before opening a position. Flexible Position Control Once users create a position on Extra Finance, they have the freedom to make adjustments anytime. They can control the exposure by ‘borrow more’ and ‘repay early’, and +/- leverage factors as needed. Extra Finance aims to be a professional yield strategy platform, other than a basic yield aggregator. 5. Service providers: Have you worked on projects similar to this one? We've audited several projects similar to Extra Finance, which are leveraged lending/borrowing farming protocols, including: Notional: "Maximum Returns. Minimum Risk. Lend, borrow, and earn leveraged yield with DeFi's leading fixed rate lending protocol." Derby Finance: "A community-powered yield optimizer that diversifies its exposure over a wide variety of DeFi yield opportunities. They also offer delta-neutral strategies." Blueberry: A protocol that boosts capital efficiency by using multiple other protocols, offering yield vaults. DODO V3: A leveraged market-making solution designed to minimize impermanent loss and improve liquidity management. 6. Will this project be fee-based or free to the end user? ExtraFi provides a variety of farming pools with customized strategies. It also serves as a lending protocol, allowing users to deposit funds and earn interest. This ensures flexibility and accessibility for all users. Our transparent fee structure is designed to support the platform's growth and deliver value to our users. 7. Will this project pay for any portion of the service? Yes, the project will be able to pay for 12% of the service costs. The total requested OP already accounts for the protocol team, covering 12% of the service costs. 8. Will this project be open-source? Yes

**Who are the founders? please cover:**

1. What makes them well-positioned to accomplish your project goals? Ceylon Phoker - Product manager, 8 years of R&D experience, dedicated in Blockchain since 2017, Discord: ceylonphoker Ben Sat - Solidity & Rust developer, 7 years of dev experience, Discord: bensatoshi Martin White - Full-stack developer, 7 years of dev experience, experience in developing products that have catered to 10 million level of users. Discord: martin_white_ Our team members have rich experience in the scope of on-chain products (they built safe DeFi protocol with 400+ Million TVL). With years of developing and actively participating in the DeFi space, they have a deep understanding of genuine market and user demand. 2. Is this their first Web3 project? No 3. If not, share links to their other projects (e.g., Github repository). Francium Website: https://francium.io/app Github: https://github.com/Francium-DeFi Documentation: https://docs.francium.io/ T witter: https://twitter.com/Francium_Defi

**Is this project funded?**

No.

**Has this project been the subject of a security breach?**

No

**Do you anticipate any particular issues or complexity in providing services to this project?**

No

**Please provide details from your due diligence on this project and audit scope (the due diligence must contain the complexity of the scope, test coverage, and test methodologies applied to the scope)**

The codebase consists of approximately 1,827 nSLOC and includes several important components within the contracts directory of the repository: Core Contracts: LendingPool.sol: Implements the main lending and borrowing functionalities, allowing users to supply assets, borrow against collateral, and manage their positions. It handles interest calculations, collateralization ratios, and liquidation processes. VaultFactory.sol: Responsible for deploying new vaults, acting as a factory contract that ensures consistent deployment parameters and manages the registry of all vaults within the protocol. VeloPositionManager.sol: Manages leveraged positions within the protocol, particularly for interactions with the Velodrome platform, facilitating yield farming and liquidity provision strategies. Token Contracts: ExtraInterestBearingToken.sol: Represents interest-bearing tokens issued to users who supply assets to the lending pools. These tokens accrue interest over time, reflecting the user's share in the pool and facilitating the tracking of deposited assets. Reward Contracts: StakingRewards.sol: Manages the staking mechanisms and distributes rewards to users who stake their tokens within the protocol, incentivizing participation and long-term engagement. StakingRewardsDeployer.sol: Facilitates the deployment of new StakingRewards contracts, allowing for scalability and the introduction of new staking programs or reward schemes. Deployment Contracts: ETokenDeployer.sol: Handles the deployment of ExtraInterestBearingToken contracts, ensuring new tokens are correctly initialized and integrated into the lending pools. VaultDeployerSelector.sol: Determines the appropriate deployer when creating new vaults, providing flexibility and modularity in the vault deployment process. Utility Contracts: Payments.sol: Provides functions for handling payments and token transfers within the protocol, ensuring secure and efficient movement of assets. InterestRateUtils.sol: Contains utility functions for calculating interest rates, supporting dynamic adjustments based on market conditions and protocol parameters. ReserveLogic.sol: Implements logic related to reserve management, including updating reserve balances and handling the accrual of interest. ReserveKey.sol: Provides utilities for generating and managing keys associated with reserves, aiding in accurate tracking and referencing within the protocol. Data Structures: DataTypes.sol: Defines custom data types and structures used across the protocol, promoting consistency and clarity in data handling. VaultTypes.sol: Specifies data structures related to vault operations, assisting in the organization and management of vault-specific information. Given the low complexity of the codebase, especially considering our extensive experience with similar leveraged lending and farming protocols, the audit is estimated to take around 10 days.

**Optimism alignment**

Where is this project currently deployed? Optimism and Base Please order where this project is deployed by TVL or some other relevant metric Full analytics can be found on DefiLlama Base: $109M Optimism: $20M Is the code base to be audited specific to the optimism deployment? Yes, the audit is specific to our Optimism deployment, specifically our integration with Velodrome AMM, to secure ExtraFi's unique offerings as a leveraged strategy & lending protocol.

**What does this audit unlock for the project?**

The audit of our Optimism-specific deployment, focusing on the Velodrome AMM integration, unlocks several key benefits: Reinforced Security Measures: It strengthens our security measures, underlining our commitment to protecting user assets and maintaining strong safety standards. Increased Confidence and User Base: By demonstrating our solid security practices, we gain more trust from users, encouraging broader use. This increased trust is expected to draw more users to ExtraFi and the wider Optimism ecosystem, positioning us as a reliable DeFi solutions provider. Boosted Ecosystem Integration: We've successfully integrated with key partners like Velodrome Finance, demonstrating our commitment to fostering innovation and expanding the Optimism ecosystem. This reflects our proactive involvement in creating a robust and secure DeFi space.

**Client contact point to confirm audit completion:**

https://t.me/phoker_ceylon 

## Critical Milestones

- **Title:** Valid list of bugs provided Open; **Source of truth:** Protocol Team / Sherlock official Discord / Sherlock official Twitter; **OP ammount:** ; **Milestone Type:** Critical; **OP tokens request:** ; **Cycle:** Cycle 28; **Completed:** Not Completed; **OP deployment date:** ; **Incentives due date:** 
